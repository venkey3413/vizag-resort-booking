<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Resort Management</title>
    <link rel="icon" type="image/png" href="../public/logo.png">
    <link rel="shortcut icon" href="../public/logo.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-container">
            <h1>üè® Resort Admin Panel</h1>
            <nav>
                <a href="https://vizagresortbooking.in">Main Site</a>
                <a href="https://vizagresortbooking.in:3002">Bookings</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="add-resort">
            <h2>Add New Resort</h2>
            <form id="resortForm">
                <input type="hidden" id="resortId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="name">Resort Name:</label>
                        <input type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="location">Location:</label>
                        <input type="text" id="location" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="price">Price per Night (‚Çπ):</label>
                        <input type="number" id="price" required>
                    </div>
                    <div class="form-group">
                        <label for="image">Main Image:</label>
                        <input type="url" id="image" placeholder="https://..." readonly>
                        <button type="button" onclick="uploadMainImage()" class="upload-btn">üì∑ Upload Image</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="gallery">Additional Images:</label>
                    <textarea id="gallery" rows="4" placeholder="Uploaded image URLs will appear here" readonly></textarea>
                    <button type="button" onclick="uploadGalleryImages()" class="upload-btn">üñºÔ∏è Upload Gallery Images</button>
                </div>
                <div class="form-group">
                    <label for="videos">Videos:</label>
                    <textarea id="videos" rows="3" placeholder="Uploaded video URLs will appear here" readonly></textarea>
                    <button type="button" onclick="uploadVideos()" class="upload-btn">üé• Upload Videos</button>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="mapLink">Google Map Link:</label>
                        <input type="url" id="mapLink" placeholder="https://maps.google.com/?q=location">
                    </div>
                </div>
                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea id="description" rows="3"></textarea>
                </div>
                <button type="submit" id="submitBtn">Add Resort</button>
                <button type="button" id="cancelBtn" onclick="cancelEdit()" style="display:none;">Cancel</button>
            </form>
        </section>

        <section class="resorts-list">
            <h2>Manage Resorts</h2>
            <div id="resortsGrid" class="resorts-grid">
                <!-- Resorts will be loaded here -->
            </div>
        </section>
    </main>

    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
        // Replace with your Cloudinary cloud name
        const CLOUDINARY_CLOUD_NAME = 'YOUR_CLOUD_NAME';
        
        function uploadMainImage() {
            cloudinary.openUploadWidget({
                cloudName: CLOUDINARY_CLOUD_NAME,
                uploadPreset: 'resort_images',
                sources: ['local', 'url'],
                multiple: false,
                resourceType: 'image',
                maxFileSize: 10000000,
                cropping: true,
                croppingAspectRatio: 16/9
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    document.getElementById('image').value = result.info.secure_url;
                }
            });
        }
        
        function uploadGalleryImages() {
            cloudinary.openUploadWidget({
                cloudName: CLOUDINARY_CLOUD_NAME,
                uploadPreset: 'resort_images',
                sources: ['local', 'url'],
                multiple: true,
                resourceType: 'image',
                maxFileSize: 10000000
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    const currentGallery = document.getElementById('gallery').value;
                    const newUrl = result.info.secure_url;
                    const updatedGallery = currentGallery ? currentGallery + '\n' + newUrl : newUrl;
                    document.getElementById('gallery').value = updatedGallery;
                }
            });
        }
        
        function uploadVideos() {
            cloudinary.openUploadWidget({
                cloudName: CLOUDINARY_CLOUD_NAME,
                uploadPreset: 'resort_videos',
                sources: ['local', 'url'],
                multiple: true,
                resourceType: 'video',
                maxFileSize: 100000000
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    const currentVideos = document.getElementById('videos').value;
                    const newUrl = result.info.secure_url;
                    const updatedVideos = currentVideos ? currentVideos + '\n' + newUrl : newUrl;
                    document.getElementById('videos').value = updatedVideos;
                }
            });
        }
    </script>
    <script src="script.js"></script>
</body>
</html>