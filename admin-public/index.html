<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Resort Management</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="shortcut icon" href="logo.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>


    <main class="container">
        <section class="add-resort">
            <h2>Add New Resort</h2>
            <form id="resortForm">
                <input type="hidden" id="resortId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="name">Resort Name:</label>
                        <input type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="location">Location:</label>
                        <input type="text" id="location" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="price">Price per Night (‚Çπ):</label>
                        <input type="number" id="price" required>
                    </div>
                    <div class="form-group">
                        <label for="image">Main Image:</label>
                        <input type="url" id="image" placeholder="https://..." readonly>
                        <button type="button" onclick="uploadMainImage()" class="upload-btn">üì∑ Upload Image</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="gallery">Additional Images:</label>
                    <textarea id="gallery" rows="4" placeholder="Uploaded image URLs will appear here" readonly></textarea>
                    <button type="button" onclick="uploadGalleryImages()" class="upload-btn">üñºÔ∏è Upload Gallery Images</button>
                </div>
                <div class="form-group">
                    <label for="videos">Videos:</label>
                    <textarea id="videos" rows="3" placeholder="Uploaded video URLs will appear here" readonly></textarea>
                    <button type="button" onclick="uploadVideos()" class="upload-btn">üé• Upload Videos</button>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="mapLink">Google Map Link:</label>
                        <input type="url" id="mapLink" placeholder="https://maps.google.com/?q=location">
                    </div>
                </div>
                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea id="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="amenities">Amenities (one per line):</label>
                    <textarea id="amenities" rows="4" placeholder="WiFi\nSwimming Pool\nRestaurant\nFree Parking\nGym\nSpa"></textarea>
                </div>
                <div class="form-group">
                    <label>Dynamic Pricing:</label>
                    <div class="pricing-container">
                        <div class="pricing-row">
                            <label>Weekday (Mon-Thu):</label>
                            <input type="number" id="weekdayPrice" placeholder="‚Çπ per night">
                        </div>
                        <div class="pricing-row">
                            <label>Weekend (Fri-Sun):</label>
                            <input type="number" id="weekendPrice" placeholder="‚Çπ per night">
                        </div>
                        <div class="pricing-row">
                            <label>Holiday/Festival:</label>
                            <input type="number" id="holidayPrice" placeholder="‚Çπ per night">
                        </div>
                    </div>
                    <small>Leave empty to use base price for that day type</small>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="createOwnerAccount"> Create Owner Account for this Resort
                    </label>
                    <div id="ownerCredentials" class="owner-credentials" style="display:none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ownerName">Owner Name:</label>
                                <input type="text" id="ownerName" placeholder="Resort Owner Name">
                            </div>
                            <div class="form-group">
                                <label for="ownerEmail">Owner Email:</label>
                                <input type="email" id="ownerEmail" placeholder="owner@example.com">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="ownerPassword">Owner Password:</label>
                            <input type="password" id="ownerPassword" placeholder="Minimum 6 characters">
                        </div>
                        <small>Owner will be able to login and manage availability for this resort</small>
                    </div>
                </div>
                <button type="submit" id="submitBtn">Add Resort</button>
                <button type="button" id="cancelBtn" onclick="cancelEdit()" style="display:none;">Cancel</button>
            </form>
        </section>

        <section class="resorts-list">
            <h2>Manage Resorts</h2>
            <div id="resortsGrid" class="resorts-grid">
                <!-- Resorts will be loaded here -->
            </div>
        </section>

        <section class="food-management">
            <h2>Food Item Management</h2>
            <div class="food-actions">
                <button onclick="clearAllFoodOrders()" class="clear-orders-btn">üóëÔ∏è Clear All Food Orders</button>
            </div>
            <div class="food-form">
                <h3>Add/Edit Food Item</h3>
                <form id="foodForm">
                    <input type="hidden" id="foodId">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="foodName">Item Name:</label>
                            <input type="text" id="foodName" required>
                        </div>
                        <div class="form-group">
                            <label for="foodPrice">Price (‚Çπ):</label>
                            <input type="number" id="foodPrice" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="foodCategory">Category:</label>
                            <select id="foodCategory" required>
                                <option value="">Select Category</option>
                                <option value="Starters">Starters</option>
                                <option value="Main Course">Main Course</option>
                                <option value="Desserts">Desserts</option>
                                <option value="Beverages">Beverages</option>
                                <option value="Snacks">Snacks</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="foodImage">Image URL:</label>
                            <input type="url" id="foodImage" placeholder="https://..." readonly>
                            <button type="button" onclick="uploadFoodImage()" class="upload-btn">üì∑ Upload Image</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="foodDescription">Description:</label>
                        <textarea id="foodDescription" rows="2"></textarea>
                    </div>
                    <button type="submit" id="foodSubmitBtn">Add Food Item</button>
                    <button type="button" id="foodCancelBtn" onclick="cancelFoodEdit()" style="display:none;">Cancel</button>
                </form>
            </div>
            <div class="food-orders">
                <h3>Recent Food Orders</h3>
                <div id="foodOrdersGrid" class="food-orders-grid">
                    <!-- Food orders will be loaded here -->
                </div>
            </div>
            <div class="food-list">
                <h3>Current Menu Items</h3>
                <div id="foodItemsGrid" class="food-items-grid">
                    <!-- Food items will be loaded here -->
                </div>
            </div>
        </section>
    </main>

    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
        // Replace with your Cloudinary cloud name
        const CLOUDINARY_CLOUD_NAME = 'dqdclezfo';
        
        function uploadMainImage() {
            cloudinary.openUploadWidget({
                cloudName: CLOUDINARY_CLOUD_NAME,
                uploadPreset: 'resort_images',
                sources: ['local', 'url'],
                multiple: false,
                resourceType: 'image',
                maxFileSize: 10000000,
                cropping: true,
                croppingAspectRatio: 16/9
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    document.getElementById('image').value = result.info.secure_url;
                }
            });
        }
        
        function uploadGalleryImages() {
            cloudinary.openUploadWidget({
                cloudName: CLOUDINARY_CLOUD_NAME,
                uploadPreset: 'resort_images',
                sources: ['local', 'url'],
                multiple: true,
                resourceType: 'image',
                maxFileSize: 10000000
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    const currentGallery = document.getElementById('gallery').value;
                    const newUrl = result.info.secure_url;
                    const updatedGallery = currentGallery ? currentGallery + '\n' + newUrl : newUrl;
                    document.getElementById('gallery').value = updatedGallery;
                }
            });
        }
        
        function uploadVideos() {
            cloudinary.openUploadWidget({
                cloudName: CLOUDINARY_CLOUD_NAME,
                uploadPreset: 'resort_videos',
                sources: ['local', 'url'],
                multiple: true,
                resourceType: 'video',
                maxFileSize: 100000000
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    const currentVideos = document.getElementById('videos').value;
                    const newUrl = result.info.secure_url;
                    const updatedVideos = currentVideos ? currentVideos + '\n' + newUrl : newUrl;
                    document.getElementById('videos').value = updatedVideos;
                }
            });
        }
        
        function uploadFoodImage() {
            cloudinary.openUploadWidget({
                cloudName: CLOUDINARY_CLOUD_NAME,
                uploadPreset: 'resort_images',
                sources: ['local', 'url'],
                multiple: false,
                resourceType: 'image',
                maxFileSize: 10000000,
                cropping: true,
                croppingAspectRatio: 1
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    document.getElementById('foodImage').value = result.info.secure_url;
                }
            });
        }
    </script>
    <script src="script.js"></script>
</body>
</html>